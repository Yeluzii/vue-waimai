{"ast":null,"code":"import { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport Header from \"../../components/HeaderOf1.vue\";\nimport { reactive, toRefs, onMounted, computed } from \"vue\";\nimport { Toast } from \"vant\";\nexport default {\n  components: {\n    Header\n  },\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const router = useRouter();\n    const data = reactive({\n      areaList: {\n        province_list: {\n          110000: \"广东省\",\n          120000: \"浙江省\",\n          140000: \"江苏省\"\n        },\n        city_list: {\n          110100: \"广州市\",\n          110200: \"深圳市\",\n          120100: \"杭州市\",\n          120200: \"宁波市\",\n          140100: \"南京市\"\n        },\n        county_list: {\n          110101: \"天河区\",\n          110102: \"海珠区\",\n          120102: \"上城区\",\n          130102: \"下城区\",\n          140101: \"栖霞区\"\n        }\n      },\n      addressInfo: {}\n    });\n    const onSave = content => {\n      // 新增和编辑\n      if (route.query.type === 'add') {\n        store.commit('addAddress', content);\n      } else {\n        store.commit('editAddress', content);\n      }\n      Toast(\"保存成功！\");\n      setTimeout(() => {\n        router.back();\n      }, 1000);\n    };\n    const onDelete = content => {\n      store.commit('deleteAddress', content);\n      Toast(\"删除成功！\");\n      setTimeout(() => {\n        router.back();\n      }, 1000);\n    };\n    const init = () => {\n      store.state.userAddress.forEach(item => {\n        if (item.id === Number(route.query.id)) {\n          data.addressInfo = item;\n        }\n      });\n    };\n    const address = computed(() => {\n      return route.query.type === 'add' ? '地址新增' : '地址编辑';\n    });\n    onMounted(() => {\n      init();\n    });\n    return {\n      ...toRefs(data),\n      onSave,\n      onDelete,\n      address\n    };\n  }\n};","map":{"version":3,"names":["useStore","useRoute","useRouter","Header","reactive","toRefs","onMounted","computed","Toast","components","setup","store","route","router","data","areaList","province_list","city_list","county_list","addressInfo","onSave","content","query","type","commit","setTimeout","back","onDelete","init","state","userAddress","forEach","item","id","Number","address"],"sources":["D:\\vue3-projects\\vue-waimai\\src\\views\\addressEdit\\addressEditIndex.vue"],"sourcesContent":["<template>\r\n    <Header :title=\"address\" />\r\n    <van-address-edit :area-list=\"areaList\" show-delete show-set-default show-search-result :address-info=\"addressInfo\"\r\n        :area-columns-placeholder=\"['请选择', '请选择', '请选择']\" @save=\"onSave\" @delete=\"onDelete\" />\r\n</template>\r\n\r\n<script>\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute ,useRouter} from \"vue-router\";\r\nimport Header from \"../../components/HeaderOf1.vue\"\r\nimport { reactive, toRefs, onMounted, computed } from \"vue\";\r\nimport { Toast } from \"vant\";\r\nexport default {\r\n    components: {\r\n        Header,\r\n    },\r\n    setup() {\r\n        const store = useStore();\r\n        const route = useRoute();\r\n        const router = useRouter();\r\n        const data = reactive({\r\n            areaList: {\r\n                province_list: {\r\n                    110000: \"广东省\",\r\n                    120000: \"浙江省\",\r\n                    140000: \"江苏省\",\r\n                },\r\n                city_list: {\r\n                    110100: \"广州市\",\r\n                    110200: \"深圳市\",\r\n                    120100: \"杭州市\",\r\n                    120200: \"宁波市\",\r\n                    140100: \"南京市\",\r\n                },\r\n                county_list: {\r\n                    110101: \"天河区\",\r\n                    110102: \"海珠区\",\r\n                    120102: \"上城区\",\r\n                    130102: \"下城区\",\r\n                    140101: \"栖霞区\",\r\n                },\r\n            },\r\n            addressInfo: {},\r\n        });\r\n        const onSave = (content) => {\r\n            // 新增和编辑\r\n            if (route.query.type === 'add') {\r\n                store.commit('addAddress', content);\r\n            } else {\r\n                store.commit('editAddress', content);\r\n            }\r\n            Toast(\"保存成功！\");\r\n            setTimeout(()=>{\r\n                router.back()\r\n            },1000);\r\n        };\r\n        const onDelete = (content) => {\r\n            store.commit('deleteAddress', content);\r\n            Toast(\"删除成功！\");\r\n            setTimeout(()=>{\r\n                router.back()\r\n            },1000);\r\n        };\r\n        const init = () => {\r\n            store.state.userAddress.forEach((item) => {\r\n                if (item.id === Number(route.query.id)) {\r\n                    data.addressInfo = item;\r\n                }\r\n            });\r\n        };\r\n        const address = computed(() => {\r\n            return route.query.type === 'add' ? '地址新增' : '地址编辑';\r\n        })\r\n        onMounted(() => {\r\n            init();\r\n        });\r\n\r\n        return {\r\n            ...toRefs(data),\r\n            onSave,\r\n            onDelete,\r\n            address,\r\n        }\r\n\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .van-button--danger {\r\n    background-color: #ffc400;\r\n    border-color: #ffc400;\r\n}\r\n\r\n/deep/ .van-switch--on {\r\n    background-color: #ffc400;\r\n}\r\n</style>"],"mappings":"AAOA,SAASA,QAAO,QAAS,MAAM;AAC/B,SAASC,QAAO,EAAGC,SAAS,QAAO,YAAY;AAC/C,OAAOC,MAAK,MAAO,gCAA+B;AAClD,SAASC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAK;AAC3D,SAASC,KAAI,QAAS,MAAM;AAC5B,eAAe;EACXC,UAAU,EAAE;IACRN;EACJ,CAAC;EACDO,KAAKA,CAAA,EAAG;IACJ,MAAMC,KAAI,GAAIX,QAAQ,CAAC,CAAC;IACxB,MAAMY,KAAI,GAAIX,QAAQ,CAAC,CAAC;IACxB,MAAMY,MAAK,GAAIX,SAAS,CAAC,CAAC;IAC1B,MAAMY,IAAG,GAAIV,QAAQ,CAAC;MAClBW,QAAQ,EAAE;QACNC,aAAa,EAAE;UACX,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE;QACZ,CAAC;QACDC,SAAS,EAAE;UACP,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE;QACZ,CAAC;QACDC,WAAW,EAAE;UACT,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE,KAAK;UACb,MAAM,EAAE;QACZ;MACJ,CAAC;MACDC,WAAW,EAAE,CAAC;IAClB,CAAC,CAAC;IACF,MAAMC,MAAK,GAAKC,OAAO,IAAK;MACxB;MACA,IAAIT,KAAK,CAACU,KAAK,CAACC,IAAG,KAAM,KAAK,EAAE;QAC5BZ,KAAK,CAACa,MAAM,CAAC,YAAY,EAAEH,OAAO,CAAC;MACvC,OAAO;QACHV,KAAK,CAACa,MAAM,CAAC,aAAa,EAAEH,OAAO,CAAC;MACxC;MACAb,KAAK,CAAC,OAAO,CAAC;MACdiB,UAAU,CAAC,MAAI;QACXZ,MAAM,CAACa,IAAI,CAAC;MAChB,CAAC,EAAC,IAAI,CAAC;IACX,CAAC;IACD,MAAMC,QAAO,GAAKN,OAAO,IAAK;MAC1BV,KAAK,CAACa,MAAM,CAAC,eAAe,EAAEH,OAAO,CAAC;MACtCb,KAAK,CAAC,OAAO,CAAC;MACdiB,UAAU,CAAC,MAAI;QACXZ,MAAM,CAACa,IAAI,CAAC;MAChB,CAAC,EAAC,IAAI,CAAC;IACX,CAAC;IACD,MAAME,IAAG,GAAIA,CAAA,KAAM;MACfjB,KAAK,CAACkB,KAAK,CAACC,WAAW,CAACC,OAAO,CAAEC,IAAI,IAAK;QACtC,IAAIA,IAAI,CAACC,EAAC,KAAMC,MAAM,CAACtB,KAAK,CAACU,KAAK,CAACW,EAAE,CAAC,EAAE;UACpCnB,IAAI,CAACK,WAAU,GAAIa,IAAI;QAC3B;MACJ,CAAC,CAAC;IACN,CAAC;IACD,MAAMG,OAAM,GAAI5B,QAAQ,CAAC,MAAM;MAC3B,OAAOK,KAAK,CAACU,KAAK,CAACC,IAAG,KAAM,KAAI,GAAI,MAAK,GAAI,MAAM;IACvD,CAAC;IACDjB,SAAS,CAAC,MAAM;MACZsB,IAAI,CAAC,CAAC;IACV,CAAC,CAAC;IAEF,OAAO;MACH,GAAGvB,MAAM,CAACS,IAAI,CAAC;MACfM,MAAM;MACNO,QAAQ;MACRQ;IACJ;EAEJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}