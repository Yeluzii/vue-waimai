{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, toRefs } from \"vue\";\nimport FoodListItem from \"./FoodListItem.vue\";\nexport default {\n  props: [\"index\", \"foodData\"],\n  components: {\n    FoodListItem\n  },\n  setup(props) {\n    let data = reactive({\n      activeIndex: 0,\n      items: [],\n      subItem: []\n    });\n\n    // console.log('Items:', data.items);\n\n    // 初始化数据\n\n    // const initData = () => {\n    //   if (props.foodData && props.foodData.items) {\n    //     props.foodData.items.forEach((item) => {\n    //       newArray.push({\n    //         text: item.text\n    //       })\n    //     })\n    //   }\n    //   data.items = newArray;\n    // }   \n\n    const initData = () => {\n      // 定义 newArray\n      let newArray = [];\n      props.foodData?.items?.forEach((item, index) => {\n        newArray.push({\n          text: item.text\n        });\n        if (data.activeIndex === index) {\n          data.subItem = item.children;\n        }\n      });\n      data.items = newArray;\n    };\n    // 写完调用一下\n    initData();\n    const navClick = i => {\n      console.log(i);\n      data.activeIndex = i;\n      initData();\n    };\n    const handleAdd = id => {\n      data.subItem.forEach((item, index) => {\n        if (item.id === id) {\n          item.add = false;\n        }\n      });\n    };\n    return {\n      ...toRefs(data),\n      navClick,\n      handleAdd\n    };\n  }\n};","map":{"version":3,"names":["reactive","toRefs","FoodListItem","props","components","setup","data","activeIndex","items","subItem","initData","newArray","foodData","forEach","item","index","push","text","children","navClick","i","console","log","handleAdd","id","add"],"sources":["D:\\vue3-projects\\vue-waimai\\src\\views\\store\\components\\FoodList.vue"],"sourcesContent":["<template>\r\n  <div class=\"food-list\" v-if=\"index === 0\">\r\n    <van-tree-select v-model:main-active-index=\"activeIndex\" height=\"88vw\" :items=\"items\" @click-nav=\"navClick\">\r\n      <template #content>\r\n        <div v-for=\"(item, index) in subItem\" :key=\"index\" class=\"item-bg\">\r\n          <FoodListItem :item=\"item\" :handleAdd=\"handleAdd\"\" />\r\n        </div>\r\n      </template>\r\n    </van-tree-select>\r\n  </div>\r\n\r\n  <div v-else>\r\n    {{ foodData.content }}\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from \"vue\";\r\nimport FoodListItem from \"./FoodListItem.vue\";\r\nexport default {\r\n  props: [\"index\", \"foodData\"],\r\n  components: {\r\n    FoodListItem,\r\n  },\r\n  setup(props) {\r\n    let data = reactive({\r\n      activeIndex: 0,\r\n      items: [],\r\n      subItem: []\r\n    });\r\n\r\n    // console.log('Items:', data.items);\r\n\r\n    // 初始化数据\r\n\r\n    // const initData = () => {\r\n    //   if (props.foodData && props.foodData.items) {\r\n    //     props.foodData.items.forEach((item) => {\r\n    //       newArray.push({\r\n    //         text: item.text\r\n    //       })\r\n    //     })\r\n    //   }\r\n    //   data.items = newArray;\r\n    // }   \r\n\r\n    const initData = () => {\r\n      // 定义 newArray\r\n      let newArray = [];\r\n      props.foodData?.items?.forEach((item, index) => {\r\n        newArray.push({\r\n          text: item.text\r\n        })\r\n        if (data.activeIndex === index) {\r\n          data.subItem = item.children;\r\n        }\r\n      })\r\n      data.items = newArray;\r\n    }\r\n    // 写完调用一下\r\n    initData();\r\n\r\n    const navClick = (i) => {\r\n      console.log(i);\r\n      data.activeIndex = i;\r\n      initData();\r\n    };\r\n\r\n    const handleAdd = (id) =>{\r\n      data.subItem.forEach((item,index)=>{\r\n        if(item.id === id){\r\n          item.add = false;\r\n        }\r\n      })\r\n    };\r\n\r\n    return {\r\n      ...toRefs(data),\r\n      navClick,\r\n      handleAdd,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.food-list {\r\n  margin-top: 20px;\r\n\r\n  .item-bg {\r\n    padding: 10px;\r\n  }\r\n}\r\n\r\n/deep/ .van-tree-select__item--active {\r\n  color: #ffc400;\r\n}\r\n\r\n/deep/ .van-sidebar-item--select::before {\r\n  background-color: #ffc400;\r\n}\r\n</style>\r\n"],"mappings":";AAkBA,SAASA,QAAQ,EAAEC,MAAK,QAAS,KAAK;AACtC,OAAOC,YAAW,MAAO,oBAAoB;AAC7C,eAAe;EACbC,KAAK,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;EAC5BC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,KAAKA,CAACF,KAAK,EAAE;IACX,IAAIG,IAAG,GAAIN,QAAQ,CAAC;MAClBO,WAAW,EAAE,CAAC;MACdC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;;IAEA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,MAAMC,QAAO,GAAIA,CAAA,KAAM;MACrB;MACA,IAAIC,QAAO,GAAI,EAAE;MACjBR,KAAK,CAACS,QAAQ,EAAEJ,KAAK,EAAEK,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;QAC9CJ,QAAQ,CAACK,IAAI,CAAC;UACZC,IAAI,EAAEH,IAAI,CAACG;QACb,CAAC;QACD,IAAIX,IAAI,CAACC,WAAU,KAAMQ,KAAK,EAAE;UAC9BT,IAAI,CAACG,OAAM,GAAIK,IAAI,CAACI,QAAQ;QAC9B;MACF,CAAC;MACDZ,IAAI,CAACE,KAAI,GAAIG,QAAQ;IACvB;IACA;IACAD,QAAQ,CAAC,CAAC;IAEV,MAAMS,QAAO,GAAKC,CAAC,IAAK;MACtBC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;MACdd,IAAI,CAACC,WAAU,GAAIa,CAAC;MACpBV,QAAQ,CAAC,CAAC;IACZ,CAAC;IAED,MAAMa,SAAQ,GAAKC,EAAE,IAAI;MACvBlB,IAAI,CAACG,OAAO,CAACI,OAAO,CAAC,CAACC,IAAI,EAACC,KAAK,KAAG;QACjC,IAAGD,IAAI,CAACU,EAAC,KAAMA,EAAE,EAAC;UAChBV,IAAI,CAACW,GAAE,GAAI,KAAK;QAClB;MACF,CAAC;IACH,CAAC;IAED,OAAO;MACL,GAAGxB,MAAM,CAACK,IAAI,CAAC;MACfa,QAAQ;MACRI;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}